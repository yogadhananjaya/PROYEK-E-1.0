<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Something For You</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        /* --- BACKGROUND AURORA ANIMATION --- */
        body {
            background: linear-gradient(-45deg, #020024, #090979, #00d4ff, #1b0030, #004e92);
            background-size: 400% 400%;
            animation: auroraBG 15s ease infinite;
            font-family: 'Poppins', sans-serif;
            margin: 0; overflow: hidden; height: 100vh;
            display: flex; justify-content: center; align-items: center; color: #333;
        }
        @keyframes auroraBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        /* --- EFEK BINTANG --- */
        .stars {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px), radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px);
            background-size: 550px 550px, 350px 350px; z-index: 1; pointer-events: none;
        }

        /* --- SPLASH SCREEN --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.5s;
        }
        .splash-logo { width: 120px; margin-bottom: 20px; animation: bounce 2s infinite; }
        .loading-bar-container { width: 200px; height: 10px; background: #eee; border-radius: 10px; overflow: hidden; }
        .loading-bar { width: 0%; height: 100%; background: #d63384; animation: loadBar 3s forwards; }
        @keyframes loadBar { 0% { width: 0%; } 100% { width: 100%; } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }

        /* --- WRAPPER & CONTAINER --- */
        .wrapper { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; position: relative; z-index: 10; }
        .page-container {
            display: none; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            padding: 35px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.5); width: 360px; max-height: 90vh; overflow-y: auto; text-align: center; animation: fadeIn 0.4s ease-out; position: relative;
        }
        .page-container::-webkit-scrollbar { display: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
        h2, h3 { color: #d63384; margin-top: 0; font-weight: 700; }
        p { color: #555; font-size: 14px; line-height: 1.6; margin-bottom: 20px; }

        /* --- BUTTONS & FORMS --- */
        .form-group { margin-bottom: 15px; text-align: left; }
        label { display: block; font-size: 12px; font-weight: 600; color: #555; margin-bottom: 5px; }
        select, input, textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 12px; outline: none; background: #fff; font-family: 'Poppins'; box-sizing: border-box; }
        select:focus, input:focus, textarea:focus { border-color: #d63384; }
        .btn-primary { background: linear-gradient(45deg, #d63384, #ff6b6b); color: white; border: none; padding: 12px; width: 100%; border-radius: 50px; font-weight: 600; cursor: pointer; box-shadow: 0 5px 15px rgba(214, 51, 132, 0.3); margin-top: 10px; transition: 0.3s; }
        .btn-primary:disabled { opacity: 0.6; cursor: not-allowed; }
        .btn-back { background: #eee; color: #555; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; }
        .btn-next { background: #d63384; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-size: 12px; float: right; }

        /* --- PROFIL TOP --- */
        .profile-btn-top {
            position: absolute; top: 20px; right: 20px; width: 45px; height: 45px;
            border-radius: 50%; overflow: hidden; border: 2px solid #d63384; cursor: pointer;
            box-shadow: 0 4px 10px rgba(214, 51, 132, 0.3); transition: transform 0.2s;
        }
        .profile-btn-top:hover { transform: scale(1.1); }
        .profile-btn-top img { width: 100%; height: 100%; object-fit: cover; }

        /* --- MENU --- */
        .card-menu { background: white; padding: 15px; border-radius: 15px; margin-bottom: 15px; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.05); border: 1px solid transparent; transition: 0.3s; }
        .card-menu:hover { border-color: #d63384; transform: translateY(-3px); box-shadow: 0 8px 20px rgba(214, 51, 132, 0.15); }
        .card-icon { font-size: 28px; display: block; margin-bottom: 5px; }
        .card-menu h3 { font-size: 16px; margin: 0; color: #333; }
        .card-menu p { font-size: 11px; margin: 0; color: #888; }

        /* --- NOTES --- */
        .note-item {
            background: #fff5f8; padding: 10px 15px; border-radius: 10px;
            margin-bottom: 10px; text-align: left; border-left: 4px solid #d63384; font-size: 13px;
            cursor: pointer; transition: 0.2s; position: relative;
        }
        .note-item:hover { background: #ffe4ec; }
        .note-status { font-size: 10px; color: #28a745; margin-top: 5px; font-weight: 600; text-align: right; display: block;}
        .note-thumbnail { width: 60px; height: 60px; object-fit: cover; border-radius: 6px; border: 1px solid #ffccd5; margin-top: 8px; display: block; }

        /* --- MODAL INSPECT PESAN --- */
        #note-modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 10000; justify-content: center; align-items: center;
        }
        .note-modal-content {
            background: white; width: 85%; max-width: 320px; padding: 25px 20px;
            border-radius: 15px; text-align: left; position: relative;
            max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: fadeIn 0.3s;
        }
        .note-modal-close {
            position: absolute; top: 12px; right: 15px; font-size: 22px; cursor: pointer; color: #aaa; transition: 0.2s;
        }
        .note-modal-close:hover { color: #d63384; }

        /* --- GAME MEMORY & RPS --- */
        .game-board { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin: 15px 0; }
        .memory-card { height: 55px; background: #ffccd5; border-radius: 8px; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 22px; transition: 0.2s; }
        .memory-card.flipped { background: #fff; transform: rotateY(180deg); }
        .memory-card.matched { background: #d4edda; }
        .rps-arena { font-size: 40px; margin: 20px 0; display: flex; justify-content: center; align-items: center; gap: 20px; height: 80px; }
        #rps-countdown { font-size: 30px; font-weight: bold; color: #d63384; width: 50px; }
        .rps-btn { font-size: 30px; padding: 15px; border-radius: 50%; border: none; background: white; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer; width: 70px; height: 70px; margin: 0 5px; }

        /* --- GAME CATCH MOCHI --- */
        #catch-area { width: 100%; height: 250px; background: #f0f8ff; border-radius: 15px; position: relative; overflow: hidden; margin: 15px 0; border: 2px dashed #bde0fe; cursor: crosshair;}
        .target-mochi { position: absolute; font-size: 35px; cursor: pointer; transition: transform 0.1s; user-select: none;}
        .target-mochi:active { transform: scale(0.8); }

        /* --- GAME TEST IQ --- */
        .box-container { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; margin-bottom: 15px; }
        .letter-box { width: 35px; height: 40px; text-align: center; font-size: 18px; font-weight: bold; border: 2px solid #ddd; border-radius: 8px; text-transform: uppercase; outline: none; background: #fff; font-family: 'Poppins'; caret-color: #d63384;}
        .letter-box:focus { border-color: #d63384; background: #fff0f5; box-shadow: 0 0 8px rgba(214, 51, 132, 0.4);}
        .letter-box[readonly] { background: #e9ecef; color: #d63384; border-color: #ffb3c6; cursor: not-allowed; }
        .space-box { width: 15px; }

        /* --- PROPOSAL --- */
        .sticker { width: 130px; margin-bottom: 10px; display: block; margin: 0 auto; }
        #typing-text { min-height: 70px; margin-bottom: 25px; color: #444; font-weight: 500; background: rgba(255,255,255,0.6); padding: 15px; border-radius: 10px; font-size: 15px; }
        .buttons-container { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 10px; position: relative; height: 50px; opacity: 0; transition: opacity 1s; }
        .btn-proposal { padding: 12px 25px; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; font-size: 14px; width: 100px; transition: 0.2s; }
        #btn-yes { background: #ff4d6d; color: white; box-shadow: 0 4px 15px rgba(255, 77, 109, 0.4); }
        #btn-no { background: #e0e0e0; color: #555; position: static; z-index: 999; }
        .success-text { font-size: 28px; color: #d63384; font-weight: 700; margin-bottom: 20px; display: block; }
    </style>
</head>
<body>

<div class="stars"></div>

<div id="splash-screen">
    <img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExZTBmNGJid3RzbHEya2NleGhta2l3aWIwZHg1Y2lma2VxeWp6cGdnMSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/kMAsQuuEeQIwm4eSVJ/giphy.gif" alt="Logo" class="splash-logo">
    <h3 style="color: #d63384; margin-bottom: 15px;">Have A Nice Day!</h3>
    <div class="loading-bar-container">
        <div class="loading-bar"></div>
    </div>
</div>

<div id="note-modal">
    <div class="note-modal-content">
        <span class="note-modal-close" onclick="closeNoteModal()">‚úñ</span>
        <h3 style="margin-top:0; font-size:18px; color:#d63384; border-bottom: 2px dashed #ffccd5; padding-bottom:10px; margin-bottom:15px;">Detail Pesan üíå</h3>
        <img id="modal-img" src="" style="width:100%; border-radius:10px; display:none; margin-bottom:15px; border: 1px solid #eee;">
        <p id="modal-text" style="font-size:14px; color:#444; word-wrap: break-word; line-height: 1.8; white-space: pre-wrap;"></p>
    </div>
</div>

<div class="wrapper">
    <div id="page-login" class="page-container" style="display: block;">
        <h2>Login Dulu üîê</h2>
        <p>Verifikasi Data Akses</p>
        <div class="form-group"><label>Nama</label><select id="input-nama"><option value="" disabled selected hidden>-- Pilih Nama --</option><option value="Elsa Insani">Elsa Insani</option></select></div>
        <div class="form-group"><label>Kelas</label><select id="input-kelas"><option value="" disabled selected hidden>-- Pilih Kelas --</option><option value="2C">2C</option></select></div>
        <div class="form-group"><label>Program Studi</label><select id="input-prodi"><option value="" disabled selected hidden>-- Pilih Prodi --</option><option value="Manajemen Informatika">Manajemen Informatika</option></select></div>
        <button class="btn-primary" onclick="handleLogin()">Masuk</button>
    </div>

    <div id="page-dashboard" class="page-container">
        <div class="profile-btn-top" onclick="switchPage('page-profile')"><img id="img-profile-top" src="https://i.pinimg.com/736x/8a/cd/77/8acd77e2cc0c3367685231a0af9d7308.jpg" alt="Profile"></div>
        <h3 style="text-align: left; margin-top: 10px;">Welcome, <br>Elsa! üëã</h3>
        <p style="text-align: left;">Pilih modul di bawah ini:</p>
        <div class="card-menu" onclick="openReview()"><span class="card-icon">üìù</span><h3>Short Text</h3><p>Pesan dari Developer</p></div>
        <div class="card-menu" onclick="switchPage('page-game-menu')"><span class="card-icon">üéÆ</span><h3>Game Center</h3><p>Main dulu biar gak tegang</p></div>
        <div class="card-menu" onclick="openNotes()"><span class="card-icon">üíå</span><h3>Diary Notes</h3><p>Tulis pesan atau curhatan kamu disini</p></div>
        <div class="card-menu" onclick="openProposal()"><span class="card-icon">üéÅ</span><h3>Project Proposal</h3><p>Undangan Spesial</p></div>
        <button class="btn-back" style="width:100%; margin-top:15px;" onclick="handleLogout()">Keluar (Logout)</button>
    </div>

    <div id="page-profile" class="page-container">
        <h3>Profil Pengguna</h3>
        <div style="position: relative; display: inline-block; margin-bottom: 15px;">
            <img id="img-profile-main" src="https://i.pinimg.com/736x/8a/cd/77/8acd77e2cc0c3367685231a0af9d7308.jpg" style="width: 100px; height: 100px; border-radius: 50%; border: 3px solid #d63384; object-fit: cover;">
            <label for="upload-photo" style="position: absolute; bottom: 0; right: 0; background: #d63384; color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.3); font-size: 14px;">üì∑</label>
            <input type="file" id="upload-photo" accept="image/*" style="display: none;" onchange="changeProfilePic(event)">
        </div>
        <div style="background: #f9f9f9; padding: 15px; border-radius: 10px; text-align: left; margin-bottom: 20px;">
            <p style="margin: 5px 0;"><strong>Nama:</strong> Elsa Insani</p><p style="margin: 5px 0;"><strong>Kelas:</strong> 2C</p><p style="margin: 5px 0;"><strong>Prodi:</strong> Manajemen Informatika</p>
        </div>
        <button class="btn-primary" onclick="switchPage('page-dashboard')">Kembali</button>
    </div>

    <div id="page-review" class="page-container">
        <h3>From Dhanan üìù</h3>
        <div id="review-slide-1">
            <p style="text-align: left;">Halo Eca! üëã<br><br>Sekarang kamu bisa liat kalo aku dah build yang awalnya website, berubah jadi aplikasi. Ya walaupun masih pake yang gratisan, <i>but it's okay</i>. Kan lumayan ya buat portofolio, "Saya pernah membuat aplikasi untuk eca pada tanggal 14 februari".<br><br>Sebenernya aplikasi ini dibikin untuk bisa semangatin kamu tiap hari, well aku cuma gak mau liat kamu sedih ataupun stress. Ingat lagunya (Diri by Tulus), "Kau terlalu berharga untuk luka, Katakan pada dirimu Semua baik-baik saja".</p>
            <button class="btn-back" onclick="switchPage('page-dashboard')">Tutup</button> <button class="btn-next" onclick="changeReviewSlide(2)">Lanjut ‚Üí</button>
        </div>
        <div id="review-slide-2" style="display:none;">
            <p style="text-align: left;">Aku tau perjalanan ke depan mungkin nggak selalu mudah, tapi jangan khawatir. Selagi kamu yakin, aku percaya nggak ada <i>error</i> yang nggak bisa di <i>solve</i>. Kamu pasti bisa lewati semuanya!. Jangan ragu untuk cerita sama aku ataupun disini ku ada modul yang Namanya <i>diary notes</i>, yang fungsinya itu adalah catatan pribadi kamu.<br><br>Cape, Lelah, sedih itu wajar. Itu siklus buat pendewasaan juga, memang hidup gak ada yang enak. Kalo enak mah aku dah kenyang tiap hari. Gapailah mimpi mu itu aku tau harapan mu tinggi dan keinginan mu besar, lakukan lah apa yang kamu suka dan maksimalkan.</p>
            <button class="btn-back" onclick="changeReviewSlide(1)">‚Üê Kembali</button> <button class="btn-next" onclick="changeReviewSlide(3)">Lanjut ‚Üí</button>
        </div>
        <div id="review-slide-3" style="display:none;">
            <p style="text-align: left;">Intinya, <i>keep fighting</i>! Kalau butuh tempat cerita, butuh <i>debugger</i> buat masalah kamu, atau ngobrol hal random, aku ada kok.<br><br>Ingat kata Jack Kahuna Laguna (JKL), <b>"Apapun yang terjadi, tetaplah bernafas"</b>.<br><br><i>Cheers!</i></p>
            <button class="btn-back" onclick="changeReviewSlide(2)">‚Üê Kembali</button> <button class="btn-next" style="background:#555" onclick="switchPage('page-dashboard')">Menu Utama</button>
        </div>
    </div>

    <div id="page-notes" class="page-container">
        <h3>Diary Notes üíå</h3>
        <p style="font-size: 12px; text-align: left;">Tulis pesan, curhatan kamu, tambah foto juga bisa</p>

        <div class="form-group"><textarea id="note-input" rows="3" placeholder="Tulis di sini..."></textarea></div>

        <div class="form-group" style="text-align: center;">
            <label for="note-photo" style="display:inline-block; background:#fff0f5; color:#d63384; padding:8px 15px; border-radius:10px; cursor:pointer; font-size:12px; font-weight:bold; border: 1px solid #d63384;">üì∑ Tambah Foto</label>
            <input type="file" id="note-photo" accept="image/*" style="display:none;" onchange="previewNotePhoto(event)">
            <div id="note-photo-preview" style="margin-top:10px; display:none; flex-direction: column; align-items: center;">
                <img id="preview-img" src="" style="max-height:100px; border-radius:8px; border: 2px solid #d63384; margin-bottom: 5px;">
                <span style="font-size:11px; color:red; cursor:pointer; font-weight:bold;" onclick="removeNotePhoto()">‚úñ Hapus Foto</span>
            </div>
        </div>

        <button id="btn-send-note" class="btn-primary" onclick="sendNoteToTelegram()" style="padding: 10px; margin-top: 0;">Menyimpan</button>

        <div id="notes-list" style="margin-top: 20px; max-height: 180px; overflow-y: auto; text-align:left;">
        </div>

        <button class="btn-back" style="width:100%; margin-top: 15px;" onclick="switchPage('page-dashboard')">Kembali ke Dashboard</button>
    </div>

    <div id="page-game-menu" class="page-container">
        <h3>Game Center üéÆ</h3>
        <div class="card-menu" onclick="switchPage('page-game-iq'); initIQ();"><h3>üß† Test Your IQ</h3></div>
        <div class="card-menu" onclick="switchPage('page-game-catch'); initCatchGame();"><h3>üèÉ‚Äç‚ôÄÔ∏è Catch Mochi</h3></div>
        <div class="card-menu" onclick="switchPage('page-game-memory'); initMemory();"><h3>üÉè Memory Card</h3></div>
        <div class="card-menu" onclick="switchPage('page-game-rps'); initRPS();"><h3>‚úä Adu Khodam</h3></div>
        <button class="btn-back" style="width:100%" onclick="switchPage('page-dashboard')">Kembali ke Dashboard</button>
    </div>

    <div id="page-game-iq" class="page-container">
        <h3>Test Your IQ üß†</h3><p style="font-size: 11px; margin-bottom: 15px;">Ketik jawabanmu. Bantuan ngebuka 1 huruf acak!</p>
        <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:12px; margin-bottom:15px; background:#f9f9f9; padding:10px; border-radius:10px;">
            <span style="color:red">Nyawa: <span id="iq-lives">3</span> ‚ù§Ô∏è</span><span style="color:#f4a261">Hint: <span id="iq-hints">10</span> üí°</span><span style="color:#2a9d8f">Soal: <span id="iq-progress">1</span>/10</span>
        </div>
        <div id="iq-game-area">
            <div id="iq-question" style="font-size: 14px; font-weight: 600; color: #333; margin-bottom: 20px; min-height: 40px;">Pertanyaan muncul di sini</div>
            <div id="iq-options"></div>
            <div style="display: flex; gap: 10px; margin-top: 15px;">
                <button class="btn-primary" id="btn-iq-hint" onclick="useHint()" style="background: #e9c46a; flex: 1; color: #333; box-shadow: 0 4px 10px rgba(233,196,106,0.3); font-size: 12px;">Hint üí°</button>
                <button class="btn-primary" onclick="checkTypedAnswer()" style="flex: 2; font-size: 14px; margin-top: 10px;">Cek Jawaban üîç</button>
            </div>
        </div>
        <div id="iq-result-area" style="display:none; margin-top: 15px;"><h3 id="iq-result-msg" style="margin-bottom: 10px;"></h3><button class="btn-primary" onclick="initIQ()">Main Lagi (Acak Ulang)</button></div>
        <button class="btn-back" style="width:100%; margin-top:15px;" onclick="switchPage('page-game-menu')">Menyerah & Kembali</button>
    </div>

    <div id="page-game-catch" class="page-container">
        <h3>Catch Mochi!</h3><p style="font-size: 12px; margin-bottom: 5px;">Tangkap mochi sebanyak-banyaknya dalam 20 detik!</p>
        <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:14px;">
            <span style="color:#d63384">Skor: <span id="catch-score">0</span></span><span>Waktu: <span id="catch-time">20</span>s</span>
        </div>
        <div style="font-size: 11px; color: #888; text-align: left; margin-top: 2px; margin-bottom: 8px;">üèÜ High Score: <span id="catch-highscore" style="font-weight: bold; color: #555;">0</span></div>
        <div id="catch-area" onclick="missClick()"></div>
        <button class="btn-primary" id="btn-start-catch" onclick="startCatchGame()">Mulai Main</button>
        <button class="btn-back" style="width:100%; margin-top:10px;" onclick="stopCatchGame(); switchPage('page-game-menu');">Kembali</button>
    </div>

    <div id="page-game-memory" class="page-container">
        <h3>Memory Card</h3>
        <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:12px; margin-bottom:10px;"><span>Skor: <span id="mem-score">0</span></span><span>Nyawa: <span id="mem-lives">5</span></span></div>
        <div id="mem-msg" style="color:#d63384; font-weight:bold; font-size:13px; margin-bottom:5px;">Cari pasangan kartu!</div>
        <div class="game-board" id="game-board"></div>
        <button class="btn-back" onclick="switchPage('page-game-menu')">Kembali</button><button class="btn-next" onclick="initMemory()">Ulangi</button>
    </div>

    <div id="page-game-rps" class="page-container">
        <h3>Adu Khodam</h3><p style="font-size:12px;">Menangkan 3 Ronde!</p>
        <div style="display:flex; justify-content:space-around; background:#f9f9f9; padding:5px; border-radius:10px; font-weight:bold; margin-bottom:20px;">
            <span>ELSA: <span id="rps-user">0</span></span><span>DHANAN: <span id="rps-comp">0</span></span>
        </div>
        <div class="rps-arena"><span id="icon-user">‚úä</span><span id="rps-countdown">VS</span><span id="icon-comp">‚úä</span></div>
        <div id="rps-result" style="font-weight:bold; margin-bottom:15px; color:#555; min-height:20px;">Pilih Senjatamu:</div>
        <div class="rps-controls" id="rps-buttons" style="display: flex; justify-content: center;">
            <button class="rps-btn" onclick="playRPS('batu')">‚úä</button><button class="rps-btn" onclick="playRPS('kertas')">‚úã</button><button class="rps-btn" onclick="playRPS('gunting')">‚úåÔ∏è</button>
        </div>
        <button class="btn-back" onclick="switchPage('page-game-menu')">Kembali</button>
        <button class="btn-back" onclick="initRPS()" id="rps-restart-btn" style="display:none; background:#d63384; color:white;">Main Lagi</button>
    </div>

    <div id="page-proposal" class="page-container">
        <img src="https://media1.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWx5ZmR4Z2t3bHQ4N2RudXhzamhoczFlNm16Nm45bDFmMnZ3cnZ5ZCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/Zl7u48zLVFgLpRwq6f/giphy.gif" alt="Cat" class="sticker">
        <h3>Project Request</h3><div id="typing-text"></div>
        <div class="buttons-container" id="btn-box">
            <button id="btn-yes" class="btn-proposal" onclick="wa()">Mau</button><button id="btn-no" class="btn-proposal" onmouseover="lari()" onclick="lari()">Tidak</button>
        </div>
    </div>

    <div id="page-success" class="page-container">
        <img src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExcXkwODR6ZTg2cnMyNGNscDl4d2lxeWVxNDhvYThiMmNocW50eXd2OSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/cbD4NSXZutjebF8cd8/giphy.gif" alt="Success" class="sticker">
        <span class="success-text">Ìï¥Ìîº Î∞úÎ†åÌÉÄÏù∏Îç∞Ïù¥!</span><p>Yeay! Proposal diterima ‚ù§Ô∏è<br>Tunggu kejutan selanjutnya ya!</p>
        <button class="btn-primary" onclick="switchPage('page-dashboard')">Kembali ke Dashboard</button>
    </div>
</div>

<script>
    // --- KONFIGURASI ---
    const myPhoneNumber = "6282114044400";
    const TELEGRAM_BOT_TOKEN = "8538235855:AAGvCNwgrmdBdX34io08j1ntT6Afs_837Wc";
    const TELEGRAM_CHAT_ID = "8155661341";

    let currentCompressedPhoto = null;

    // --- INISIALISASI ---
    window.addEventListener('DOMContentLoaded', (event) => {
        setTimeout(() => {
            document.getElementById('splash-screen').style.opacity = "0";
            setTimeout(() => { document.getElementById('splash-screen').style.display = "none"; }, 500);
        }, 3000);

        const savedPic = localStorage.getItem('elsa_profile_pic');
        if (savedPic) {
            document.getElementById('img-profile-top').src = savedPic;
            document.getElementById('img-profile-main').src = savedPic;
        }

        if (localStorage.getItem('elsa_is_logged_in') === 'true') {
            document.getElementById('page-login').style.display = 'none';
            document.getElementById('page-dashboard').style.display = 'block';
        }
    });

    // --- NAVIGASI ---
    function switchPage(pageId) {
        document.querySelectorAll('.page-container').forEach(page => page.style.display = 'none');
        document.getElementById(pageId).style.display = 'block';
    }

    function handleLogin() {
        const n = document.getElementById('input-nama').value;
        const k = document.getElementById('input-kelas').value;
        const p = document.getElementById('input-prodi').value;
        if (n && k && p) {
            localStorage.setItem('elsa_is_logged_in', 'true');
            switchPage('page-dashboard');
        } else {
            alert("Lengkapi data identitas dulu ya!");
        }
    }

    function handleLogout() {
        localStorage.removeItem('elsa_is_logged_in');
        switchPage('page-login');
    }

    function changeProfilePic(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Image = e.target.result;
                localStorage.setItem('elsa_profile_pic', base64Image);
                document.getElementById('img-profile-top').src = base64Image;
                document.getElementById('img-profile-main').src = base64Image;
            };
            reader.readAsDataURL(file);
        }
    }

    // --- REVIEW SLIDES ---
    function openReview() {
        changeReviewSlide(1);
        switchPage('page-review');
    }
    function changeReviewSlide(targetSlide) {
        document.getElementById('review-slide-1').style.display = 'none';
        document.getElementById('review-slide-2').style.display = 'none';
        document.getElementById('review-slide-3').style.display = 'none';
        document.getElementById(`review-slide-${targetSlide}`).style.display = 'block';
    }

    // --- PROPOSAL ---
    function openProposal() {
        switchPage('page-proposal');
        const btn = document.getElementById('btn-no');
        btn.style.position = 'static';
        btn.style.left = 'auto';
        btn.style.top = 'auto';
        document.getElementById('btn-box').style.opacity = 0;
        typeWriter();
    }
    const txt = "Hai! Kamu tanggal 14 Februari free gak? <br><br> Mau nggak jadi partner aku?";
    let typeInterval;
    function typeWriter() {
        const el = document.getElementById('typing-text');
        el.innerHTML = "";
        let i = 0;
        const words = txt.split(" ");
        function type() {
            if (i < words.length) {
                el.innerHTML += words[i] + " ";
                i++;
                setTimeout(type, 150);
            } else {
                setTimeout(() => { document.getElementById('btn-box').style.opacity = 1; }, 500);
            }
        }
        type();
    }
    function lari() {
        const btn = document.getElementById('btn-no');
        btn.style.position = 'fixed';
        const maxX = window.innerWidth - 100;
        const maxY = window.innerHeight - 50;
        btn.style.left = Math.max(10, Math.random() * maxX) + 'px';
        btn.style.top = Math.max(10, Math.random() * maxY) + 'px';
    }
    function wa() {
        switchPage('page-success');
        window.open(`https://wa.me/${myPhoneNumber}?text=Hai%20Dhanan!%20Iya%20aku%20mau%20jadi%20partner%20kamu%20%F0%9F%9A%80%F0%9F%92%96`, '_blank');
    }

    // ==========================================
    // DIARY NOTES & TELEGRAM BOT
    // ==========================================
    function openNotes() {
        switchPage('page-notes');
        renderSentNotes();
    }

    function previewNotePhoto(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const MAX_WIDTH = 600;
                    let width = img.width; let height = img.height;

                    if (width > MAX_WIDTH) { height *= MAX_WIDTH / width; width = MAX_WIDTH; }
                    canvas.width = width; canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0, width, height);

                    currentCompressedPhoto = canvas.toDataURL('image/jpeg', 0.6);
                    document.getElementById('preview-img').src = currentCompressedPhoto;
                    document.getElementById('note-photo-preview').style.display = 'flex';
                }
                img.src = e.target.result;
            }
            reader.readAsDataURL(file);
        }
    }

    function removeNotePhoto() {
        document.getElementById('note-photo').value = "";
        document.getElementById('preview-img').src = "";
        document.getElementById('note-photo-preview').style.display = 'none';
        currentCompressedPhoto = null;
    }

    function sendNoteToTelegram() {
        const input = document.getElementById('note-input');
        const photoInput = document.getElementById('note-photo');
        const btn = document.getElementById('btn-send-note');

        const text = input.value.trim();
        const photoFile = photoInput.files[0];

        if (text === "" && !photoFile) return;
        btn.innerText = "Mengirim..."; btn.disabled = true;

        let url = ""; let options = {};
        const pesanCaption = text ? `üì© Pesan Baru dari Eca:\n\n"${text}"` : `üì© Pesan Baru dari Eca: (Hanya mengirim foto)`;

        if (photoFile) {
            url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`;
            const formData = new FormData();
            formData.append('chat_id', TELEGRAM_CHAT_ID);
            formData.append('photo', photoFile);
            formData.append('caption', pesanCaption);
            options = { method: 'POST', body: formData };
        } else {
            url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            const payload = { chat_id: TELEGRAM_CHAT_ID, text: pesanCaption };
            options = { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) };
        }

        fetch(url, options)
            .then(async response => {
                if (response.ok) {
                    let notes = JSON.parse(localStorage.getItem('elsa_notes_sent')) || [];
                    notes.push({ text: text || "(Hanya mengirim foto)", photoData: currentCompressedPhoto });

                    try {
                        localStorage.setItem('elsa_notes_sent', JSON.stringify(notes));
                    } catch (e) {
                        alert("Penyimpanan HP kamu mulai penuh, beberapa riwayat pesan lama akan dihapus otomatis agar pesan baru bisa masuk.");
                        notes.shift();
                        localStorage.setItem('elsa_notes_sent', JSON.stringify(notes));
                    }

                    input.value = ""; removeNotePhoto(); renderSentNotes();
                } else {
                    const errData = await response.json();
                    alert(`Gagal mengirim ke Telegram.\nPesan Error: ${errData.description}`);
                }
            })
            .catch(error => { alert("Gagal terhubung ke server Telegram. Cek internet kamu ya!"); })
            .finally(() => { btn.innerText = "Kirim Pesan"; btn.disabled = false; });
    }

    function renderSentNotes() {
        const list = document.getElementById('notes-list');
        let notes = JSON.parse(localStorage.getItem('elsa_notes_sent')) || [];
        list.innerHTML = "";

        if (notes.length === 0) {
            list.innerHTML = "<p style='font-size:12px; color:#aaa; text-align:center;'>Belum ada pesan terkirim.</p>";
            return;
        }

        notes.slice().reverse().forEach((note) => {
            let div = document.createElement('div');
            div.className = 'note-item';

            let contentText = typeof note === 'object' ? note.text : note;
            let photoThumbnailHtml = (typeof note === 'object' && note.photoData)
                ? `<img src="${note.photoData}" class="note-thumbnail">` : "";

            div.innerHTML = `
                <div style="pointer-events:none; margin-bottom:5px;">
                    <span style="font-weight:600; color:#555;">"${contentText.length > 35 ? contentText.substring(0,35) + '...' : contentText}"</span>
                    ${photoThumbnailHtml}
                </div>
                <span class="note-status">Klik untuk lihat / Inspect üëÄ</span>
            `;

            div.onclick = function() {
                openNoteModal(contentText, typeof note === 'object' ? note.photoData : null);
            };

            list.appendChild(div);
        });
    }

    function openNoteModal(fullText, photoData) {
        document.getElementById('modal-text').innerText = fullText;
        const imgEl = document.getElementById('modal-img');
        if (photoData) {
            imgEl.src = photoData;
            imgEl.style.display = 'block';
        } else {
            imgEl.style.display = 'none';
        }
        document.getElementById('note-modal').style.display = 'flex';
    }

    function closeNoteModal() {
        document.getElementById('note-modal').style.display = 'none';
    }

    // ==========================================
    // GAME: TEST IQ (FULL 50 SOAL)
    // ==========================================
    const allIqQuestions = [
        { q: "Apa yang punya mata banyak tapi nggak bisa melihat?", opts: ["Jarum", "Nanas", "Badai", "Mata-mata"], ans: 1 },
        { q: "Cuaca mendung, 5 orang pakai 1 payung kecil. Kenapa mereka tidak kehujanan?", opts: ["Berpelukan", "Lari", "Belum Hujan", "Ajaib"], ans: 2 },
        { q: "Kalau dibalik akan berkurang 3. Angka berapa?", opts: ["Enam", "Sembilan", "Delapan", "Tiga"], ans: 1 },
        { q: "Punya lengan tak punya jari, punya leher tak punya kepala.", opts: ["Botol", "Kemeja", "Patung", "Gitar"], ans: 1 },
        { q: "Masuk miring, keluar miring. Apa itu?", opts: ["Kepiting", "Kancing Baju", "Orang mabuk", "Koin"], ans: 1 },
        { q: "10 menit untuk merebus 1 telur, berapa waktu merebus 5 telur bersamaan?", opts: ["Lima Puluh", "Sepuluh", "Lima", "Dua"], ans: 1 },
        { q: "Ayah Maryam punya 5 anak: Nana, Nene, Nini, Nono. Siapa anak kelima?", opts: ["Nunu", "Nanya", "Maryam", "Nina"], ans: 2 },
        { q: "Makin sering diusap, makin hilang.", opts: ["Air mata", "Penghapus", "Debu", "Kenangan"], ans: 1 },
        { q: "Ada di ujung langit, tengah sawah, akhir hari. Apa itu?", opts: ["Matahari", "Burung", "Huruf I", "Awan"], ans: 2 },
        { q: "Selalu di depan mata tapi tak terlihat.", opts: ["Alis", "Udara", "Masa Depan", "Hidung"], ans: 2 },
        { q: "Bulan apa yang punya 28 hari?", opts: ["Februari", "Semua Bulan", "Januari", "Desember"], ans: 1 },
        { q: "Jika berlari menyalip juara 2, kamu juara berapa?", opts: ["Juara Satu", "Juara Dua", "Juara Tiga", "Terakhir"], ans: 1 },
        { q: "Selalu naik tak pernah turun.", opts: ["Harga", "Umur", "Gaji", "Pohon"], ans: 1 },
        { q: "Dibeli untuk dimakan, tapi tak pernah dimakan.", opts: ["Es krim", "Obat", "Piring", "Pajangan"], ans: 2 },
        { q: "Jatuh dari gedung tak mati, jatuh ke air mati.", opts: ["Kucing", "Kertas", "Batu", "Burung"], ans: 1 },
        { q: "Punya banyak gigi tapi tak bisa menggigit.", opts: ["Gergaji", "Kakek", "Sisir", "Ritsleting"], ans: 2 },
        { q: "Punya banyak daun tak ada batang.", opts: ["Buku", "Pintu", "Meja", "Jendela"], ans: 0 },
        { q: "Hewan apa yang paling tidak sopan?", opts: ["Kera", "Kutu", "Anjing", "Babi"], ans: 1 },
        { q: "Mana yang lebih berat: 1 kg besi atau 1 kg kapas?", opts: ["Besi", "Kapas", "Sama Berat", "Angin"], ans: 2 },
        { q: "Punya kota tanpa rumah, punya air tanpa ikan.", opts: ["Gurun", "Peta", "Lukisan", "Mimpi"], ans: 1 },
        { q: "Berapa tanah di lubang 2x2 meter?", opts: ["Empat", "Nol", "Banyak", "Delapan"], ans: 1 },
        { q: "Ditutup baru terlihat.", opts: ["Mimpi", "Pintu", "Lampu", "Buku"], ans: 0 },
        { q: "Berjalan di atas kepala.", opts: ["Topi", "Kutu", "Awan", "Pikiran"], ans: 1 },
        { q: "Masuk besar, keluar kecil.", opts: ["Mobil", "Sikat gigi", "Pencuri", "Makanan"], ans: 1 },
        { q: "Waktu tepat buka pintu?", opts: ["Pagi", "Saat Tertutup", "Malam", "Tamu"], ans: 1 },
        { q: "Huruf paling kedinginan?", opts: ["Z", "B", "A", "C"], ans: 1 },
        { q: "Tak bisa digenggam tapi bisa ditangkap.", opts: ["Angin", "Bayangan", "Janji", "Penyakit"], ans: 3 },
        { q: "Tak bisa jalan meski punya 4 kaki.", opts: ["Kucing", "Meja", "Sapi", "Batu"], ans: 1 },
        { q: "Hitam saat beli, merah dipakai, abu-abu dibuang.", opts: ["Rokok", "Arang", "Baju", "Sepatu"], ans: 1 },
        { q: "Bicara tanpa suara, punya kata tanpa mulut.", opts: ["Hati", "Pikiran", "Buku", "Radio"], ans: 2 },
        { q: "Bekerja sambil mundur.", opts: ["Pendayung", "Supir", "Orang gila", "Tukang"], ans: 0 },
        { q: "Selalu bertambah tak pernah kurang.", opts: ["Uang", "Dosa", "Umur", "Pahala"], ans: 2 },
        { q: "Bila diucap langsung batal atau hilang.", opts: ["Rahasia", "Sihir", "Kentut", "Puasa"], ans: 0 },
        { q: "Buah paling rajin?", opts: ["Semangka", "Apel", "Pisang", "Jeruk"], ans: 1 },
        { q: "Kenapa keyboard komputer nggak pernah tidur?", opts: ["Kerjaan", "Ada Shift", "Tombol WAKE", "Baterai"], ans: 1 },
        { q: "Benda apa yang selalu salah?", opts: ["Kalkulator", "Jawaban", "Urat Nadi", "Hati"], ans: 2 },
        { q: "Hewan apa yang sering telat?", opts: ["Kura kura", "Siput", "Kaki Seribu", "Kelelawar"], ans: 2 },
        { q: "Pintu apa yang didorong sepuluh orang nggak bakal kebuka?", opts: ["Pintu besi", "Pintu Tarik", "Pintu hati", "Pintu bank"], ans: 1 },
        { q: "Bisa dipegang tak bisa dilihat.", opts: ["Janji", "Kuping", "Udara", "Kentut"], ans: 1 },
        { q: "Sapi apa yang larinya cepat?", opts: ["Sapi gila", "Sapeda", "Sapi balap", "Sapi jantan"], ans: 1 },
        { q: "Kalau ada 10 pejuang, mati 1, tinggal berapa?", opts: ["Sembilan", "Seribu", "Habis", "Nol"], ans: 1 },
        { q: "Mandi nggak basah.", opts: ["Mandi bola", "Keringat", "Cahaya", "Uang"], ans: 0 },
        { q: "Ayam apa yang ditabrak mobil nggak mati?", opts: ["Ayam jago", "Kalkun", "Ayam Goreng", "Ayam kampus"], ans: 2 },
        { q: "Burung apa yang nolak disuruh?", opts: ["Beo", "Burung Unta", "Hantu", "Dara"], ans: 1 },
        { q: "Benda yang bikin orang tidur merem.", opts: ["Bantal", "Obat tidur", "Kasur", "Kelopak Mata"], ans: 3 },
        { q: "Masuk kering, keluar basah.", opts: ["Teh Celup", "Handuk", "Sikat gigi", "Kopi"], ans: 0 },
        { q: "Tukang apa yang kalau dipanggil malah lari?", opts: ["Tukang ojek", "Copet", "Tukang baso", "Pos"], ans: 1 },
        { q: "Pohon apa yang paling berani?", opts: ["Beringin", "Mangga", "Pohon Pisang", "Jati"], ans: 2 },
        { q: "Ada ayam 5, di kali 2. Berapa?", opts: ["Sepuluh", "Lima", "Nol", "Tujuh"], ans: 1 },
        { q: "Mobil tabrakan di jalan tol, yang turun apanya dulu?", opts: ["Sopir", "Ban", "Speedometer", "Kaca"], ans: 2 }
    ];

    let activeIqQuestions = [];
    let iqLives = 3; let iqHints = 10; let currentQIndex = 0;
    let currentCleanAns = "";

    function initIQ() {
        let shuffled = [...allIqQuestions].sort(() => 0.5 - Math.random());
        activeIqQuestions = shuffled.slice(0, 10);
        iqLives = 3; iqHints = 10; currentQIndex = 0;
        document.getElementById('iq-game-area').style.display = "block";
        document.getElementById('iq-result-area').style.display = "none";
        updateIQStats();
        renderIQQuestion();
    }

    function updateIQStats() {
        document.getElementById('iq-lives').innerText = iqLives;
        document.getElementById('iq-hints').innerText = iqHints;
        document.getElementById('iq-progress').innerText = (currentQIndex + 1);
        const hintBtn = document.getElementById('btn-iq-hint');
        hintBtn.disabled = (iqHints <= 0);
        hintBtn.innerText = iqHints <= 0 ? "Hint Habis" : `Hint üí° (${iqHints})`;
    }

    function renderIQQuestion() {
        if (currentQIndex >= activeIqQuestions.length) {
            endIQ("MENANG! Gacor juga nih.");
            return;
        }
        const qData = activeIqQuestions[currentQIndex];
        document.getElementById('iq-question').innerText = `Soal ${currentQIndex + 1}: ${qData.q}`;
        let rawAns = qData.opts[qData.ans];
        currentCleanAns = rawAns.toUpperCase().trim();

        const optionsArea = document.getElementById('iq-options');
        let boxHtml = '<div class="box-container">';

        for (let i = 0; i < currentCleanAns.length; i++) {
            let char = currentCleanAns[i];
            if (/[A-Z0-9]/.test(char)) {
                boxHtml += `<input type="text" class="letter-box" maxlength="1" data-char="${char}" oninput="moveToNext(this, event)" onkeydown="handleBackspace(this, event)">`;
            } else if (char === ' ') {
                boxHtml += `<div class="space-box"></div>`;
            } else {
                boxHtml += `<div style="display:flex; align-items:center; font-weight:bold; padding: 0 2px;">${char}</div>`;
            }
        }
        boxHtml += '</div>';
        optionsArea.innerHTML = boxHtml;

        let inputs = Array.from(document.querySelectorAll('.letter-box'));
        let availableIndices = Array.from(inputs.keys()).sort(() => 0.5 - Math.random());
        let revealCount = Math.min(2, inputs.length - 1);

        for (let i = 0; i < revealCount; i++) {
            let idx = availableIndices[i];
            inputs[idx].value = inputs[idx].getAttribute('data-char');
            inputs[idx].readOnly = true;
        }

        setTimeout(() => {
            let firstEmpty = inputs.find(input => !input.readOnly);
            if (firstEmpty) firstEmpty.focus();
        }, 100);
    }

    function moveToNext(el, event) {
        el.value = el.value.toUpperCase();
        if (el.value !== "") {
            let inputs = Array.from(document.querySelectorAll('.letter-box'));
            let currentIndex = inputs.indexOf(el);
            for(let i = currentIndex + 1; i < inputs.length; i++) {
                if(!inputs[i].readOnly) { inputs[i].focus(); break; }
            }
        }
    }

    function handleBackspace(el, event) {
        if (event.key === "Backspace" && el.value === "") {
            let inputs = Array.from(document.querySelectorAll('.letter-box'));
            let currentIndex = inputs.indexOf(el);
            for(let i = currentIndex - 1; i >= 0; i--) {
                if(!inputs[i].readOnly) { inputs[i].focus(); inputs[i].value = ""; event.preventDefault(); break; }
            }
        } else if (event.key === "Enter") {
            checkTypedAnswer();
        }
    }

    function checkTypedAnswer() {
        let inputs = document.querySelectorAll('.letter-box');
        let userAns = ""; let inputIdx = 0;

        for (let i = 0; i < currentCleanAns.length; i++) {
            let char = currentCleanAns[i];
            if (/[A-Z0-9]/.test(char)) { userAns += inputs[inputIdx].value.toUpperCase(); inputIdx++; }
            else { userAns += char; }
        }

        if (userAns === currentCleanAns) {
            currentQIndex++; iqHints++; updateIQStats(); renderIQQuestion();
        } else {
            iqLives--; updateIQStats();
            if (iqLives <= 0) {
                endIQ("GAME OVER!");
            } else {
                alert("Tetoooot! Jawaban salah.");
                inputs.forEach(input => { if(!input.readOnly) input.value = ""; });
                let firstEmpty = Array.from(inputs).find(input => !input.readOnly);
                if(firstEmpty) firstEmpty.focus();
            }
        }
    }

    function useHint() {
        if (iqHints > 0) {
            let inputs = document.querySelectorAll('.letter-box');
            let emptyIndices = [];
            inputs.forEach((input, idx) => { if(input.value === "" && !input.readOnly) emptyIndices.push(idx); });

            if (emptyIndices.length > 0) {
                iqHints--;
                let randIdx = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
                inputs[randIdx].value = inputs[randIdx].getAttribute('data-char');
                inputs[randIdx].readOnly = true;
                updateIQStats();
            } else { alert("Eh, semua kotak huruf udah penuh lho!"); }
        }
    }

    function endIQ(message) {
        document.getElementById('iq-game-area').style.display = "none";
        document.getElementById('iq-result-area').style.display = "block";
        document.getElementById('iq-result-msg').innerText = message;
    }

    // ==========================================
    // GAME: CATCH MOCHI
    // ==========================================
    let catchScore = 0; let catchTime = 20; let catchInterval; let targetInterval; let isCatchPlaying = false;
    let catchHighScore = localStorage.getItem('elsa_catch_highscore') || 0;

    function initCatchGame() {
        document.getElementById('catch-score').innerText = 0;
        document.getElementById('catch-time').innerText = 20;
        catchHighScore = localStorage.getItem('elsa_catch_highscore') || 0;
        document.getElementById('catch-highscore').innerText = catchHighScore;
        document.getElementById('catch-area').innerHTML = "";
        document.getElementById('btn-start-catch').style.display = "block";
        isCatchPlaying = false;
    }

    function startCatchGame() {
        if(isCatchPlaying) return;
        isCatchPlaying = true; catchScore = 0; catchTime = 20;
        document.getElementById('catch-score').innerText = catchScore;
        document.getElementById('catch-time').innerText = catchTime;
        document.getElementById('btn-start-catch').style.display = "none";
        catchInterval = setInterval(() => {
            catchTime--;
            document.getElementById('catch-time').innerText = catchTime;
            if(catchTime <= 0) { endGameCatch(); }
        }, 1000);
        spawnTarget();
    }

    function spawnTarget() {
        if(!isCatchPlaying) return;
        const area = document.getElementById('catch-area');
        area.innerHTML = "";
        const target = document.createElement('div');
        target.className = 'target-mochi';
        target.innerText = 'üê±';
        const maxX = area.clientWidth - 40; const maxY = area.clientHeight - 40;
        target.style.left = Math.floor(Math.random() * maxX) + "px";
        target.style.top = Math.floor(Math.random() * maxY) + "px";

        target.onclick = function(e) {
            e.stopPropagation();
            catchScore++;
            document.getElementById('catch-score').innerText = catchScore;
            area.innerHTML = "";
            let speed = Math.max(400, 1000 - (catchScore * 50));
            clearTimeout(targetInterval);
            targetInterval = setTimeout(spawnTarget, speed);
        };

        area.appendChild(target);
        clearTimeout(targetInterval);
        let disappearSpeed = Math.max(500, 1200 - (catchScore * 50));
        targetInterval = setTimeout(spawnTarget, disappearSpeed);
    }

    function missClick() {
        if(isCatchPlaying && catchScore > 0) {
            catchScore--;
            document.getElementById('catch-score').innerText = catchScore;
        }
    }

    function stopCatchGame() {
        isCatchPlaying = false;
        clearInterval(catchInterval);
        clearTimeout(targetInterval);
    }

    function endGameCatch() {
        stopCatchGame();
        let msg = `WAKTU HABIS!<br>Skor Akhir: ${catchScore}`;
        if(catchScore > catchHighScore) {
            catchHighScore = catchScore;
            localStorage.setItem('elsa_catch_highscore', catchHighScore);
            document.getElementById('catch-highscore').innerText = catchHighScore;
            msg += `<br><br><span style="color:#28a745; font-size:16px;">üéâ NEW HIGH SCORE! üéâ</span>`;
        }
        document.getElementById('catch-area').innerHTML = `<div style="margin-top: 70px; font-weight:bold; color:#d63384;">${msg}</div>`;
        document.getElementById('btn-start-catch').style.display = "block";
        document.getElementById('btn-start-catch').innerText = "Main Lagi";
    }

    // ==========================================
    // GAME: MEMORY CARD
    // ==========================================
    let mScore=0, mLives=5, mLock=false, mF=null, mS=null, mMatch=0;
    const mIcons = ['‚ù§Ô∏è','üöÄ','üçï','üê±','üåπ'];

    function initMemory() {
        mScore=0; mLives=5; mMatch=0; mLock=false; mF=null; mS=null;
        document.getElementById('mem-score').innerText = 0;
        document.getElementById('mem-lives').innerText = 5;
        document.getElementById('mem-msg').innerText = "Cari pasangan!";

        const board = document.getElementById('game-board');
        board.innerHTML = "";
        let deck = [...mIcons, ...mIcons].sort(()=>0.5-Math.random());

        deck.forEach(icon => {
            let d = document.createElement('div');
            d.className = 'memory-card';
            d.dataset.icon = icon;
            d.onclick = function() {
                if(mLock || this === mF || this.classList.contains('matched')) return;
                this.classList.add('flipped');
                this.innerText = icon;
                if(!mF) { mF = this; return; }
                mS = this;
                checkMem();
            };
            board.appendChild(d);
        });
    }

    function checkMem() {
        mLock = true;
        if(mF.dataset.icon === mS.dataset.icon) {
            mF.classList.add('matched');
            mS.classList.add('matched');
            mScore+=20; mMatch++;
            document.getElementById('mem-score').innerText = mScore;
            resetMem();
            if(mMatch===5) document.getElementById('mem-msg').innerText = "MENANG!";
        } else {
            mLives--;
            document.getElementById('mem-lives').innerText = mLives;
            setTimeout(() => {
                mF.classList.remove('flipped'); mF.innerText = "";
                mS.classList.remove('flipped'); mS.innerText = "";
                resetMem();
                if(mLives===0) {
                    document.getElementById('mem-msg').innerText = "GAME OVER";
                    mLock=true;
                }
            }, 800);
        }
    }

    function resetMem() { [mF, mS, mLock] = [null, null, false]; }

    // ==========================================
    // GAME: ADU KHODAM (RPS)
    // ==========================================
    let uScore=0, cScore=0, isRPSPlaying=false;

    function initRPS() {
        uScore=0; cScore=0; isRPSPlaying=false;
        document.getElementById('rps-user').innerText = 0;
        document.getElementById('rps-comp').innerText = 0;
        document.getElementById('icon-user').innerText = "‚úä";
        document.getElementById('icon-comp').innerText = "‚úä";
        document.getElementById('rps-countdown').innerText = "VS";
        document.getElementById('rps-buttons').style.display = 'flex';
        document.getElementById('rps-restart-btn').style.display = 'none';
    }

    function playRPS(userChoice) {
        if(isRPSPlaying) return;
        isRPSPlaying = true;
        document.querySelectorAll('.rps-btn').forEach(btn => btn.disabled = true);
        const countEl = document.getElementById('rps-countdown');
        let count = 3; countEl.innerText = count;

        const timer = setInterval(() => {
            count--;
            if(count > 0) {
                countEl.innerText = count;
            } else {
                clearInterval(timer);
                countEl.innerText = "VS";
                finishRound(userChoice);
            }
        }, 700);
    }

    function finishRound(userChoice) {
        const opts = ['batu','kertas','gunting'];
        const cChoice = opts[Math.floor(Math.random()*3)];
        const map = {'batu':'‚úä','kertas':'‚úã','gunting':'‚úåÔ∏è'};

        document.getElementById('icon-user').innerText = map[userChoice];
        document.getElementById('icon-comp').innerText = map[cChoice];

        if(userChoice !== cChoice) {
            if((userChoice=='batu'&&cChoice=='gunting') || (userChoice=='kertas'&&cChoice=='batu') || (userChoice=='gunting'&&cChoice=='kertas')) {
                uScore++;
            } else {
                cScore++;
            }
        }

        document.getElementById('rps-user').innerText = uScore;
        document.getElementById('rps-comp').innerText = cScore;

        if(uScore===3 || cScore===3) {
            document.getElementById('rps-result').innerText = uScore===3 ? "MENANG!" : "KALAH!";
            document.getElementById('rps-buttons').style.display='none';
            document.getElementById('rps-restart-btn').style.display='inline-block';
        } else {
            isRPSPlaying = false;
            document.querySelectorAll('.rps-btn').forEach(btn => btn.disabled = false);
        }
    }
</script>
</body>
</html>